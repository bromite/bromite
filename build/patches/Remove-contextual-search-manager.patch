From: csagan5 <32685696+csagan5@users.noreply.github.com>
Date: Wed, 9 Mar 2022 19:22:02 +0100
Subject: Remove contextual search manager

License: GPL-3.0-only - https://spdx.org/licenses/GPL-3.0-only.html
---
 chrome/android/BUILD.gn                       |  5 --
 chrome/android/chrome_java_resources.gni      |  8 --
 chrome/android/chrome_java_sources.gni        | 44 ----------
 .../ManualFillingMediator.java                |  9 --
 .../layout/contextual_search_caption_view.xml | 16 ----
 .../contextual_search_card_icon_view.xml      | 14 ---
 .../layout/contextual_search_context_view.xml | 27 ------
 .../layout/contextual_search_promo_view.xml   | 88 -------------------
 ...ntextual_search_quick_action_icon_view.xml | 14 ---
 ...ontextual_search_related_searches_view.xml | 23 -----
 .../layout/contextual_search_term_view.xml    | 21 -----
 .../res/xml/contextual_search_preferences.xml | 27 ------
 .../res/xml/google_services_preferences.xml   |  4 -
 .../java/res/xml/privacy_preferences.xml      |  4 -
 .../chrome/browser/ChromeTabbedActivity.java  |  4 +-
 .../chrome/browser/app/ChromeActivity.java    | 50 +----------
 .../bottombar/OverlayPanelContent.java        |  1 -
 .../compositor/layouts/LayoutManagerImpl.java |  4 +-
 .../customtabs/BaseCustomTabActivity.java     |  2 +-
 .../BaseCustomTabRootUiCoordinator.java       | 16 +---
 .../browser/customtabs/CustomTabActivity.java |  6 --
 .../modaldialog/ChromeTabModalPresenter.java  | 12 +--
 .../modaldialog/TabModalLifetimeHandler.java  |  7 +-
 .../privacy/settings/PrivacySettings.java     |  9 --
 .../chrome/browser/tab/TabHelpers.java        |  2 -
 .../tabbed_mode/TabbedRootUiCoordinator.java  |  5 +-
 .../chrome/browser/ui/RootUiCoordinator.java  | 39 +-------
 chrome/browser/BUILD.gn                       | 17 ----
 chrome/browser/about_flags.cc                 | 36 --------
 .../flags/android/chrome_feature_list.cc      | 28 ------
 .../flags/android/chrome_feature_list.h       |  5 --
 ...nfiguration_policy_handler_list_factory.cc |  6 +-
 .../strings/android_chrome_strings.grd        | 59 -------------
 content/browser/browser_interface_binders.cc  |  1 -
 third_party/blink/public/mojom/BUILD.gn       |  2 +-
 third_party/blink/public/public_features.gni  |  2 +-
 36 files changed, 17 insertions(+), 600 deletions(-)
 delete mode 100644 chrome/android/java/res/layout/contextual_search_caption_view.xml
 delete mode 100644 chrome/android/java/res/layout/contextual_search_card_icon_view.xml
 delete mode 100644 chrome/android/java/res/layout/contextual_search_context_view.xml
 delete mode 100644 chrome/android/java/res/layout/contextual_search_promo_view.xml
 delete mode 100644 chrome/android/java/res/layout/contextual_search_quick_action_icon_view.xml
 delete mode 100644 chrome/android/java/res/layout/contextual_search_related_searches_view.xml
 delete mode 100644 chrome/android/java/res/layout/contextual_search_term_view.xml
 delete mode 100644 chrome/android/java/res/xml/contextual_search_preferences.xml

diff --git a/chrome/android/BUILD.gn b/chrome/android/BUILD.gn
--- a/chrome/android/BUILD.gn
+++ b/chrome/android/BUILD.gn
@@ -732,7 +732,6 @@ if (current_toolchain == default_toolchain) {
       "//chrome/browser/ui:duplicate_download_enums_java",
       "//components/browsing_data/core:browsing_data_utils_java",
       "//components/browsing_data/core:clear_browsing_data_tab_java",
-      "//components/contextual_search/core/browser:quick_action_category_enum_javagen",
       "//components/dom_distiller/core:distiller_type_java",
       "//components/ntp_tiles:ntp_tiles_enums_java",
       "//components/offline_pages/core:offline_page_model_enums_java",
@@ -4014,16 +4013,12 @@ generate_jni("chrome_jni_headers") {
     "java/src/org/chromium/chrome/browser/compositor/LayerTitleCache.java",
     "java/src/org/chromium/chrome/browser/compositor/bottombar/OverlayPanelContent.java",
     "java/src/org/chromium/chrome/browser/compositor/layouts/content/TabContentManager.java",
-    "java/src/org/chromium/chrome/browser/compositor/scene_layer/ContextualSearchSceneLayer.java",
     "java/src/org/chromium/chrome/browser/compositor/scene_layer/StaticTabSceneLayer.java",
     "java/src/org/chromium/chrome/browser/compositor/scene_layer/TabListSceneLayer.java",
     "java/src/org/chromium/chrome/browser/compositor/scene_layer/TabStripSceneLayer.java",
     "java/src/org/chromium/chrome/browser/compositor/scene_layer/ToolbarSwipeSceneLayer.java",
     "java/src/org/chromium/chrome/browser/content/ContentUtils.java",
     "java/src/org/chromium/chrome/browser/contextmenu/ContextMenuHelper.java",
-    "java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchContext.java",
-    "java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchManager.java",
-    "java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchTabHelper.java",
     "java/src/org/chromium/chrome/browser/crash/MinidumpUploadServiceImpl.java",
     "java/src/org/chromium/chrome/browser/customtabs/CustomTabsConnection.java",
     "java/src/org/chromium/chrome/browser/customtabs/CustomTabsOpenTimeRecorder.java",
diff --git a/chrome/android/chrome_java_resources.gni b/chrome/android/chrome_java_resources.gni
--- a/chrome/android/chrome_java_resources.gni
+++ b/chrome/android/chrome_java_resources.gni
@@ -487,13 +487,6 @@ chrome_java_resources = [
   "java/res/layout/context_menu_header.xml",
   "java/res/layout/context_menu_row.xml",
   "java/res/layout/context_menu_share_row.xml",
-  "java/res/layout/contextual_search_caption_view.xml",
-  "java/res/layout/contextual_search_card_icon_view.xml",
-  "java/res/layout/contextual_search_context_view.xml",
-  "java/res/layout/contextual_search_promo_view.xml",
-  "java/res/layout/contextual_search_quick_action_icon_view.xml",
-  "java/res/layout/contextual_search_related_searches_view.xml",
-  "java/res/layout/contextual_search_term_view.xml",
   "java/res/layout/custom_tabs_bottombar.xml",
   "java/res/layout/custom_tabs_bottombar_item.xml",
   "java/res/layout/custom_tabs_control_container.xml",
@@ -649,7 +642,6 @@ chrome_java_resources = [
   "java/res/xml/autofill_assistant_preferences.xml",
   "java/res/xml/bookmark_widget_info.xml",
   "java/res/xml/clear_browsing_data_preferences_tab.xml",
-  "java/res/xml/contextual_search_preferences.xml",
   "java/res/xml/developer_preferences.xml",
   "java/res/xml/do_not_track_preferences.xml",
   "java/res/xml/google_services_preferences.xml",
diff --git a/chrome/android/chrome_java_sources.gni b/chrome/android/chrome_java_sources.gni
--- a/chrome/android/chrome_java_sources.gni
+++ b/chrome/android/chrome_java_sources.gni
@@ -302,21 +302,6 @@ chrome_java_sources = [
   "java/src/org/chromium/chrome/browser/compositor/bottombar/OverlayPanelManager.java",
   "java/src/org/chromium/chrome/browser/compositor/bottombar/OverlayPanelRepaddingTextView.java",
   "java/src/org/chromium/chrome/browser/compositor/bottombar/OverlayPanelTextViewInflater.java",
-  "java/src/org/chromium/chrome/browser/compositor/bottombar/contextualsearch/ContextualSearchBarControl.java",
-  "java/src/org/chromium/chrome/browser/compositor/bottombar/contextualsearch/ContextualSearchCaptionControl.java",
-  "java/src/org/chromium/chrome/browser/compositor/bottombar/contextualsearch/ContextualSearchCardIconControl.java",
-  "java/src/org/chromium/chrome/browser/compositor/bottombar/contextualsearch/ContextualSearchContextControl.java",
-  "java/src/org/chromium/chrome/browser/compositor/bottombar/contextualsearch/ContextualSearchImageControl.java",
-  "java/src/org/chromium/chrome/browser/compositor/bottombar/contextualsearch/ContextualSearchPanel.java",
-  "java/src/org/chromium/chrome/browser/compositor/bottombar/contextualsearch/ContextualSearchPanelCoordinator.java",
-  "java/src/org/chromium/chrome/browser/compositor/bottombar/contextualsearch/ContextualSearchPanelInterface.java",
-  "java/src/org/chromium/chrome/browser/compositor/bottombar/contextualsearch/ContextualSearchPanelMetrics.java",
-  "java/src/org/chromium/chrome/browser/compositor/bottombar/contextualsearch/ContextualSearchPromoControl.java",
-  "java/src/org/chromium/chrome/browser/compositor/bottombar/contextualsearch/ContextualSearchQuickActionControl.java",
-  "java/src/org/chromium/chrome/browser/compositor/bottombar/contextualsearch/ContextualSearchSheetContent.java",
-  "java/src/org/chromium/chrome/browser/compositor/bottombar/contextualsearch/ContextualSearchTermControl.java",
-  "java/src/org/chromium/chrome/browser/compositor/bottombar/contextualsearch/NoSystemGestureFrameLayout.java",
-  "java/src/org/chromium/chrome/browser/compositor/bottombar/contextualsearch/RelatedSearchesControl.java",
   "java/src/org/chromium/chrome/browser/compositor/bottombar/ephemeraltab/EphemeralTabCoordinator.java",
   "java/src/org/chromium/chrome/browser/compositor/bottombar/ephemeraltab/EphemeralTabMediator.java",
   "java/src/org/chromium/chrome/browser/compositor/bottombar/ephemeraltab/EphemeralTabSheetContent.java",
@@ -357,7 +342,6 @@ chrome_java_sources = [
   "java/src/org/chromium/chrome/browser/compositor/overlays/strip/TabLoadTracker.java",
   "java/src/org/chromium/chrome/browser/compositor/resources/StaticResourcePreloads.java",
   "java/src/org/chromium/chrome/browser/compositor/resources/SystemResourcePreloads.java",
-  "java/src/org/chromium/chrome/browser/compositor/scene_layer/ContextualSearchSceneLayer.java",
   "java/src/org/chromium/chrome/browser/compositor/scene_layer/StaticTabSceneLayer.java",
   "java/src/org/chromium/chrome/browser/compositor/scene_layer/TabListSceneLayer.java",
   "java/src/org/chromium/chrome/browser/compositor/scene_layer/TabStripSceneLayer.java",
@@ -383,34 +367,6 @@ chrome_java_sources = [
   "java/src/org/chromium/chrome/browser/contextmenu/ContextMenuUi.java",
   "java/src/org/chromium/chrome/browser/contextmenu/ContextMenuUtils.java",
   "java/src/org/chromium/chrome/browser/contextmenu/LensChipDelegate.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchContext.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchFieldTrial.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchHeuristic.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchHeuristics.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchInternalStateController.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchInternalStateHandler.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchManagementDelegate.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchManager.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchNetworkCommunicator.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchObserver.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchPolicy.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchPreferenceFragment.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchRequest.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchSelectionController.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchSelectionHandler.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchTabHelper.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchTapState.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchTranslation.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchTranslationImpl.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/ContextualSearchUma.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/DisableablePromoTapCounter.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/RelatedSearchesList.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/RelatedSearchesStamp.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/RelatedSearchesUma.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/ResolvedSearchTerm.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/SelectionClientManager.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/TapFarFromPreviousSuppression.java",
-  "java/src/org/chromium/chrome/browser/contextualsearch/TapSuppressionHeuristics.java",
   "java/src/org/chromium/chrome/browser/crash/ChromeMinidumpUploadJobServiceImpl.java",
   "java/src/org/chromium/chrome/browser/crash/ChromeMinidumpUploaderDelegate.java",
   "java/src/org/chromium/chrome/browser/crash/ChromePureJavaExceptionReporter.java",
diff --git a/chrome/android/features/keyboard_accessory/internal/java/src/org/chromium/chrome/browser/keyboard_accessory/ManualFillingMediator.java b/chrome/android/features/keyboard_accessory/internal/java/src/org/chromium/chrome/browser/keyboard_accessory/ManualFillingMediator.java
--- a/chrome/android/features/keyboard_accessory/internal/java/src/org/chromium/chrome/browser/keyboard_accessory/ManualFillingMediator.java
+++ b/chrome/android/features/keyboard_accessory/internal/java/src/org/chromium/chrome/browser/keyboard_accessory/ManualFillingMediator.java
@@ -34,7 +34,6 @@ import org.chromium.base.supplier.Supplier;
 import org.chromium.chrome.browser.app.ChromeActivity;
 import org.chromium.chrome.browser.back_press.BackPressManager;
 import org.chromium.chrome.browser.compositor.CompositorViewHolder;
-import org.chromium.chrome.browser.contextualsearch.ContextualSearchManager;
 import org.chromium.chrome.browser.flags.ChromeFeatureList;
 import org.chromium.chrome.browser.fullscreen.FullscreenManager;
 import org.chromium.chrome.browser.fullscreen.FullscreenOptions;
@@ -515,14 +514,6 @@ class ManualFillingMediator
         // When in VR mode, don't extend the keyboard
         if (VrModuleProvider.getDelegate().isInVr()) return false;
 
-        // Don't open the accessory inside the contextual search panel.
-        ObservableSupplier<ContextualSearchManager> contextualSearchSupplier =
-                mActivity.getContextualSearchManagerSupplier();
-        if (contextualSearchSupplier != null && contextualSearchSupplier.hasValue()
-                && contextualSearchSupplier.get().isSearchPanelOpened()) {
-            return false;
-        }
-
         // If an accessory sheet was opened, the accessory bar must be visible.
         if (mAccessorySheet.isShown()) return true;
 
diff --git a/chrome/android/java/res/layout/contextual_search_caption_view.xml b/chrome/android/java/res/layout/contextual_search_caption_view.xml
deleted file mode 100644
--- a/chrome/android/java/res/layout/contextual_search_caption_view.xml
+++ /dev/null
@@ -1,16 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<!--
-Copyright 2016 The Chromium Authors
-Use of this source code is governed by a BSD-style license that can be
-found in the LICENSE file.
--->
-
-<!-- Contextual Search caption view. -->
-<FrameLayout
-    xmlns:android="http://schemas.android.com/apk/res/android"
-    android:id="@+id/contextual_search_caption_view"
-    style="@style/ContextualSearchTextViewLayout" >
-    <TextView
-        android:id="@+id/contextual_search_caption"
-        style="@style/ContextualSearchCaptionTextView" />
-</FrameLayout>
\ No newline at end of file
diff --git a/chrome/android/java/res/layout/contextual_search_card_icon_view.xml b/chrome/android/java/res/layout/contextual_search_card_icon_view.xml
deleted file mode 100644
--- a/chrome/android/java/res/layout/contextual_search_card_icon_view.xml
+++ /dev/null
@@ -1,14 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<!--
-Copyright 2019 The Chromium Authors
-Use of this source code is governed by a BSD-style license that can be
-found in the LICENSE file.
--->
-
-<!-- Contextual Search image view to display a Contextual Card icon. -->
-<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
-    android:id="@+id/contextual_search_card_icon_view"
-    android:layout_width="@dimen/contextual_search_bar_image_size"
-    android:layout_height="@dimen/contextual_search_bar_image_size"
-    android:importantForAccessibility="no"
-    android:scaleType="center"/>
diff --git a/chrome/android/java/res/layout/contextual_search_context_view.xml b/chrome/android/java/res/layout/contextual_search_context_view.xml
deleted file mode 100644
--- a/chrome/android/java/res/layout/contextual_search_context_view.xml
+++ /dev/null
@@ -1,27 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<!--
-Copyright 2015 The Chromium Authors
-Use of this source code is governed by a BSD-style license that can be
-found in the LICENSE file.
--->
-
-<!-- Contextual Search search context view. -->
-<LinearLayout
-    xmlns:android="http://schemas.android.com/apk/res/android"
-    android:id="@+id/contextual_search_context_view"
-    style="@style/ContextualSearchTextViewLayout"
-    android:gravity="center" >
-    <!-- Search Bar Text -->
-    <TextView
-        android:id="@+id/selected_text"
-        style="@style/ContextualSearchTextView"
-        android:layout_width="wrap_content"
-        android:layout_marginStart="7dp"
-        android:layout_marginEnd="5dp"
-        android:gravity="center_horizontal" />
-    <TextView
-        android:id="@+id/surrounding_text_end"
-        style="@style/ContextualSearchContextTextView"
-        android:layout_marginEnd="7dp"
-        android:gravity="start" />
-</LinearLayout>
diff --git a/chrome/android/java/res/layout/contextual_search_promo_view.xml b/chrome/android/java/res/layout/contextual_search_promo_view.xml
deleted file mode 100644
--- a/chrome/android/java/res/layout/contextual_search_promo_view.xml
+++ /dev/null
@@ -1,88 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<!--
-Copyright 2021 The Chromium Authors
-Use of this source code is governed by a BSD-style license that can be
-found in the LICENSE file.
--->
-<FrameLayout
-    xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:app="http://schemas.android.com/apk/res-auto"
-    android:id="@+id/contextual_search_promo"
-    android:layout_width="match_parent"
-    android:layout_height="wrap_content"
-    android:paddingTop="8dp"
-    android:paddingBottom="16dp"
-    android:paddingStart="16dp"
-    android:paddingEnd="16dp"
-    android:visibility="invisible">
-
-    <org.chromium.components.browser_ui.widget.MaterialCardViewNoShadow
-        android:layout_width="match_parent"
-        android:layout_height="wrap_content"
-        style="@style/MaterialCardStyle">
-
-        <RelativeLayout
-            android:layout_width="match_parent"
-            android:layout_height="wrap_content">
-
-            <org.chromium.components.browser_ui.widget.text.TextViewWithCompoundDrawables
-                android:id="@+id/contextual_search_promo_title"
-                android:layout_alignParentTop="true"
-                android:layout_alignParentStart="true"
-                android:layout_alignParentEnd="true"
-                android:layout_width="match_parent"
-                android:layout_height="wrap_content"
-                android:layout_marginTop="16dp"
-                android:layout_marginStart="16dp"
-                android:layout_marginEnd="16dp"
-                android:bufferType="spannable"
-                android:drawableStart="@drawable/btn_info"
-                app:drawableWidth="24dp"
-                app:drawableHeight="24dp"
-                app:chromeDrawableTint="@macro/default_icon_color_accent1"
-                android:tintMode="src_in"
-                android:drawablePadding="8dp"
-                android:text="@string/contextual_search_promo_title"
-                android:textAppearance="@style/TextAppearance.TextLarge.Primary" />
-
-            <org.chromium.ui.widget.TextViewWithClickableSpans
-                android:id="@+id/contextual_search_promo_text"
-                android:layout_below="@id/contextual_search_promo_title"
-                android:layout_alignParentStart="true"
-                android:layout_alignParentEnd="true"
-                android:layout_width="match_parent"
-                android:layout_height="wrap_content"
-                android:layout_marginTop="8dp"
-                android:layout_marginStart="48dp"
-                android:layout_marginEnd="16dp"
-                android:bufferType="spannable"
-                android:textAppearance="@style/TextAppearance.TextSmall.Secondary" />
-
-            <org.chromium.ui.widget.ButtonCompat
-                android:id="@+id/contextual_search_allow_button"
-                android:layout_below="@id/contextual_search_promo_text"
-                android:layout_alignParentEnd="true"
-                android:layout_width="wrap_content"
-                android:layout_height="wrap_content"
-                android:layout_gravity="end"
-                android:layout_marginTop="16dp"
-                android:layout_marginBottom="16dp"
-                android:layout_marginEnd="16dp"
-                android:text="@string/contextual_search_include_button"
-                style="@style/FilledButton.Flat" />
-
-            <org.chromium.ui.widget.ButtonCompat
-                android:id="@+id/contextual_search_no_thanks_button"
-                android:layout_below="@id/contextual_search_promo_text"
-                android:layout_toStartOf="@id/contextual_search_allow_button"
-                android:layout_width="wrap_content"
-                android:layout_height="wrap_content"
-                android:layout_gravity="end"
-                android:layout_marginTop="16dp"
-                android:layout_marginBottom="16dp"
-                android:layout_marginEnd="16dp"
-                android:text="@string/contextual_search_no_thanks_button"
-                style="@style/TextButton" />
-        </RelativeLayout>
-    </org.chromium.components.browser_ui.widget.MaterialCardViewNoShadow>
-</FrameLayout>
\ No newline at end of file
diff --git a/chrome/android/java/res/layout/contextual_search_quick_action_icon_view.xml b/chrome/android/java/res/layout/contextual_search_quick_action_icon_view.xml
deleted file mode 100644
--- a/chrome/android/java/res/layout/contextual_search_quick_action_icon_view.xml
+++ /dev/null
@@ -1,14 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<!--
-Copyright 2016 The Chromium Authors
-Use of this source code is governed by a BSD-style license that can be
-found in the LICENSE file.
--->
-
-<!-- Contextual Search image view. -->
-<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
-    android:id="@+id/contextual_search_quick_action_icon_view"
-    android:layout_width="@dimen/contextual_search_bar_image_size"
-    android:layout_height="@dimen/contextual_search_bar_image_size"
-    android:importantForAccessibility="no"
-    android:scaleType="center"/>
\ No newline at end of file
diff --git a/chrome/android/java/res/layout/contextual_search_related_searches_view.xml b/chrome/android/java/res/layout/contextual_search_related_searches_view.xml
deleted file mode 100644
--- a/chrome/android/java/res/layout/contextual_search_related_searches_view.xml
+++ /dev/null
@@ -1,23 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<!--
-Copyright 2021 The Chromium Authors
-Use of this source code is governed by a BSD-style license that can be
-found in the LICENSE file.
--->
-
-<!-- Displays Related Searches suggestions in the Bar of the Overlay Panel. -->
-<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
-    android:id="@+id/contextual_search_related_searches_view_id"
-    android:layout_width="wrap_content"
-    android:layout_height="wrap_content"
-    android:visibility="invisible">
-    <org.chromium.chrome.browser.compositor.bottombar.contextualsearch.NoSystemGestureFrameLayout
-        android:id="@+id/contextual_search_related_searches_view_control_id"
-        android:layout_width="wrap_content"
-        android:layout_height="wrap_content"
-        android:background="@macro/overlay_panel_bar_background_color"
-        android:layout_marginBottom="@dimen/toolbar_progress_bar_height"
-        android:layout_gravity="top">
-        <!-- ChipView elements and their container are dynamically added here. -->
-    </org.chromium.chrome.browser.compositor.bottombar.contextualsearch.NoSystemGestureFrameLayout>
-</FrameLayout>
diff --git a/chrome/android/java/res/layout/contextual_search_term_view.xml b/chrome/android/java/res/layout/contextual_search_term_view.xml
deleted file mode 100644
--- a/chrome/android/java/res/layout/contextual_search_term_view.xml
+++ /dev/null
@@ -1,21 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<!--
-Copyright 2015 The Chromium Authors
-Use of this source code is governed by a BSD-style license that can be
-found in the LICENSE file.
--->
-
-<!-- Contextual Search search term view. -->
-<FrameLayout
-    xmlns:android="http://schemas.android.com/apk/res/android"
-    android:id="@+id/contextual_search_term_view"
-    style="@style/ContextualSearchTextViewLayout" >
-    <TextView
-        android:id="@+id/contextual_search_term"
-        style="@style/ContextualSearchTextView"
-        android:layout_width="match_parent"
-        android:layout_gravity="bottom"
-        android:background="@macro/overlay_panel_bar_background_color"
-        android:layout_marginStart="7dp"
-        android:layout_marginEnd="7dp" />
-</FrameLayout>
diff --git a/chrome/android/java/res/xml/contextual_search_preferences.xml b/chrome/android/java/res/xml/contextual_search_preferences.xml
deleted file mode 100644
--- a/chrome/android/java/res/xml/contextual_search_preferences.xml
+++ /dev/null
@@ -1,27 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<!--
-Copyright 2015 The Chromium Authors
-Use of this source code is governed by a BSD-style license that can be
-found in the LICENSE file.
--->
-
-<PreferenceScreen
-    xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:app="http://schemas.android.com/apk/res-auto">
-
-    <org.chromium.components.browser_ui.settings.ChromeSwitchPreference
-        android:key="contextual_search_switch"
-        android:summaryOn="@string/text_on"
-        android:summaryOff="@string/text_off" />
-
-    <org.chromium.components.browser_ui.settings.ChromeSwitchPreference
-        android:key="see_better_results_switch"
-        android:title="@string/contextual_search_see_better_results_title"
-        android:summary="@string/contextual_search_see_better_results_summary" />
-
-    <org.chromium.components.browser_ui.settings.TextMessagePreference
-        android:key="contextual_search_description"
-        android:title="@string/contextual_search_description"
-        app:allowDividerBelow="false" />
-
-</PreferenceScreen>
diff --git a/chrome/android/java/res/xml/google_services_preferences.xml b/chrome/android/java/res/xml/google_services_preferences.xml
--- a/chrome/android/java/res/xml/google_services_preferences.xml
+++ b/chrome/android/java/res/xml/google_services_preferences.xml
@@ -48,8 +48,4 @@ found in the LICENSE file.
         android:summary="@string/prefs_autofill_assistant_summary"
         android:fragment="org.chromium.chrome.browser.autofill_assistant.AutofillAssistantPreferenceFragment"
         app:isPreferenceVisible="false"/>
-    <org.chromium.components.browser_ui.settings.ChromeBasePreference
-        android:key="contextual_search"
-        android:title="@string/contextual_search_title"
-        android:fragment="org.chromium.chrome.browser.contextualsearch.ContextualSearchPreferenceFragment"/>
 </PreferenceScreen>
diff --git a/chrome/android/java/res/xml/privacy_preferences.xml b/chrome/android/java/res/xml/privacy_preferences.xml
--- a/chrome/android/java/res/xml/privacy_preferences.xml
+++ b/chrome/android/java/res/xml/privacy_preferences.xml
@@ -56,10 +56,6 @@ found in the LICENSE file.
           android:title="@string/autocomplete_searches_and_urls_title"
           android:summary="@string/autocomplete_searches_and_urls_summary"
           android:persistent="false"/>
-      <org.chromium.components.browser_ui.settings.ChromeBasePreference
-          android:key="contextual_search"
-          android:title="@string/contextual_search_title"
-          android:fragment="org.chromium.chrome.browser.contextualsearch.ContextualSearchPreferenceFragment"/>
     </PreferenceCategory>
     <Preference
         android:key="phone_as_a_security_key"
diff --git a/chrome/android/java/src/org/chromium/chrome/browser/ChromeTabbedActivity.java b/chrome/android/java/src/org/chromium/chrome/browser/ChromeTabbedActivity.java
--- a/chrome/android/java/src/org/chromium/chrome/browser/ChromeTabbedActivity.java
+++ b/chrome/android/java/src/org/chromium/chrome/browser/ChromeTabbedActivity.java
@@ -1742,7 +1742,7 @@ public class ChromeTabbedActivity extends ChromeActivity<ChromeActivityComponent
         return new TabbedRootUiCoordinator(this, this::onOmniboxFocusChanged,
                 getShareDelegateSupplier(), getActivityTabProvider(), mTabModelProfileSupplier,
                 mBookmarkModelSupplier, mTabBookmarkerSupplier,
-                getContextualSearchManagerSupplier(), getTabModelSelectorSupplier(),
+                null, getTabModelSelectorSupplier(),
                 mStartSurfaceSupplier, mTabSwitcherSupplier, mIntentMetadataOneshotSupplier,
                 mLayoutStateProviderSupplier, mStartSurfaceParentTabSupplier,
                 getBrowserControlsManager(), getWindowAndroid(), mJankTracker,
@@ -2816,7 +2816,7 @@ public class ChromeTabbedActivity extends ChromeActivity<ChromeActivityComponent
         // TODO(crbug.com/1157310): Transition this::method refs to dedicated suppliers.
         mTabModalHandler = new TabModalLifetimeHandler(this, getLifecycleDispatcher(), manager,
                 this::getAppBrowserControlsVisibilityDelegate, this::getTabObscuringHandler,
-                this::getToolbarManager, getContextualSearchManagerSupplier(),
+                this::getToolbarManager, null,
                 getTabModelSelectorSupplier(), this::getBrowserControlsManager,
                 this::getFullscreenManager, mBackPressManager);
         return manager;
diff --git a/chrome/android/java/src/org/chromium/chrome/browser/app/ChromeActivity.java b/chrome/android/java/src/org/chromium/chrome/browser/app/ChromeActivity.java
--- a/chrome/android/java/src/org/chromium/chrome/browser/app/ChromeActivity.java
+++ b/chrome/android/java/src/org/chromium/chrome/browser/app/ChromeActivity.java
@@ -92,9 +92,6 @@ import org.chromium.chrome.browser.compositor.layouts.SceneChangeObserver;
 import org.chromium.chrome.browser.compositor.layouts.content.ContentOffsetProvider;
 import org.chromium.chrome.browser.compositor.layouts.content.TabContentManager;
 import org.chromium.chrome.browser.compositor.layouts.content.TabContentManagerHandler;
-import org.chromium.chrome.browser.contextualsearch.ContextualSearchFieldTrial;
-import org.chromium.chrome.browser.contextualsearch.ContextualSearchManager;
-import org.chromium.chrome.browser.contextualsearch.ContextualSearchManager.ContextualSearchTabPromotionDelegate;
 import org.chromium.chrome.browser.dependency_injection.ChromeActivityCommonsModule;
 import org.chromium.chrome.browser.dependency_injection.ChromeActivityComponent;
 import org.chromium.chrome.browser.dependency_injection.ModuleFactoryOverrides;
@@ -256,7 +253,7 @@ import java.util.function.Consumer;
  */
 public abstract class ChromeActivity<C extends ChromeActivityComponent>
         extends AsyncInitializationActivity
-        implements TabCreatorManager, PolicyChangeListener, ContextualSearchTabPromotionDelegate,
+        implements TabCreatorManager, PolicyChangeListener,
                    SnackbarManageable, SceneChangeObserver,
                    StatusBarColorController.StatusBarColorProvider, AppMenuDelegate, AppMenuBlocker,
                    MenuOrKeyboardActionController, CompositorViewHolder.Initializer,
@@ -323,8 +320,6 @@ public abstract class ChromeActivity<C extends ChromeActivityComponent>
             new ObservableSupplierImpl<>();
     protected final UnownedUserDataSupplier<InsetObserverView> mInsetObserverViewSupplier =
             new InsetObserverViewSupplier();
-    private final ObservableSupplierImpl<ContextualSearchManager> mContextualSearchManagerSupplier =
-            new ObservableSupplierImpl<>();
 
     private SnackbarManager mSnackbarManager;
 
@@ -516,7 +511,7 @@ public abstract class ChromeActivity<C extends ChromeActivityComponent>
         // clang-format off
         return new RootUiCoordinator(this, null, getShareDelegateSupplier(),
                 getActivityTabProvider(), mTabModelProfileSupplier, mBookmarkModelSupplier,
-                mTabBookmarkerSupplier, getContextualSearchManagerSupplier(),
+                mTabBookmarkerSupplier, null,
                 getTabModelSelectorSupplier(), new OneshotSupplierImpl<>(),
                 new OneshotSupplierImpl<>(), new OneshotSupplierImpl<>(),
                 new OneshotSupplierImpl<>(), () -> null, mBrowserControlsManagerSupplier.get(),
@@ -956,14 +951,6 @@ public abstract class ChromeActivity<C extends ChromeActivityComponent>
         mCompositorViewHolderSupplier.get().onNativeLibraryReady(
                 getWindowAndroid(), getTabContentManager(), getPrefService());
 
-        // TODO(1107916): Move contextual search initialization to the RootUiCoordinator.
-        if (ContextualSearchFieldTrial.isEnabled()) {
-            mContextualSearchManagerSupplier.set(new ContextualSearchManager(this, this,
-                    mRootUiCoordinator.getScrimCoordinator(), getActivityTabProvider(),
-                    getFullscreenManager(), getBrowserControlsManager(), getWindowAndroid(),
-                    getTabModelSelectorSupplier().get(), () -> getLastUserInteractionTime()));
-        }
-
         TraceEvent.end("ChromeActivity:CompositorInitialization");
     }
 
@@ -1457,11 +1444,6 @@ public abstract class ChromeActivity<C extends ChromeActivityComponent>
     @SuppressLint("NewApi")
     @Override
     protected final void onDestroy() {
-        if (mContextualSearchManagerSupplier.hasValue()) {
-            mContextualSearchManagerSupplier.get().destroy();
-            mContextualSearchManagerSupplier.set(null);
-        }
-
         if (mSnackbarManager != null) {
             SnackbarManagerProvider.detach(mSnackbarManager);
         }
@@ -1972,13 +1954,6 @@ public abstract class ChromeActivity<C extends ChromeActivityComponent>
         return mCompositorViewHolderSupplier.get();
     }
 
-    /**
-     * @return The {@code ContextualSearchManager} or {@code null} if none;
-     */
-    public ObservableSupplier<ContextualSearchManager> getContextualSearchManagerSupplier() {
-        return mContextualSearchManagerSupplier;
-    }
-
     /**
      * Exits the fullscreen mode, if any. Does nothing if no fullscreen is present.
      * @return Whether the fullscreen mode is currently showing.
@@ -2024,15 +1999,6 @@ public abstract class ChromeActivity<C extends ChromeActivityComponent>
         }
 
         mActivityTabProvider.setLayoutStateProvider(layoutManager);
-
-        if (mContextualSearchManagerSupplier.hasValue()) {
-            mContextualSearchManagerSupplier.get().initialize(contentContainer, layoutManager,
-                    mRootUiCoordinator.getBottomSheetController(), compositorViewHolder,
-                    getControlContainerHeightResource() == ActivityUtils.NO_RESOURCE_ID
-                            ? 0f
-                            : getResources().getDimension(getControlContainerHeightResource()),
-                    getToolbarManager(), getActivityType(), getIntentRequestTracker());
-        }
     }
 
     /**
@@ -2310,18 +2276,6 @@ public abstract class ChromeActivity<C extends ChromeActivityComponent>
         return webContents != null ? SelectionPopupController.fromWebContents(webContents) : null;
     }
 
-    @Override
-    public void createContextualSearchTab(String searchUrl) {
-        Tab currentTab = getActivityTab();
-        if (currentTab == null) return;
-
-        TabCreator tabCreator = getTabCreator(currentTab.isIncognito());
-        if (tabCreator == null) return;
-
-        tabCreator.createNewTab(new LoadUrlParams(searchUrl, PageTransition.LINK),
-                TabLaunchType.FROM_LINK, getActivityTab());
-    }
-
     /** Opens the chrome://management page on a new tab. */
     private void openChromeManagementPage() {
         Tab currentTab = getActivityTab();
diff --git a/chrome/android/java/src/org/chromium/chrome/browser/compositor/bottombar/OverlayPanelContent.java b/chrome/android/java/src/org/chromium/chrome/browser/compositor/bottombar/OverlayPanelContent.java
--- a/chrome/android/java/src/org/chromium/chrome/browser/compositor/bottombar/OverlayPanelContent.java
+++ b/chrome/android/java/src/org/chromium/chrome/browser/compositor/bottombar/OverlayPanelContent.java
@@ -19,7 +19,6 @@ import org.chromium.base.annotations.NativeMethods;
 import org.chromium.base.supplier.Supplier;
 import org.chromium.chrome.browser.WebContentsFactory;
 import org.chromium.chrome.browser.content.ContentUtils;
-import org.chromium.chrome.browser.contextualsearch.ContextualSearchManager;
 import org.chromium.chrome.browser.externalnav.ExternalNavigationDelegateImpl;
 import org.chromium.chrome.browser.incognito.IncognitoUtils;
 import org.chromium.chrome.browser.profiles.Profile;
diff --git a/chrome/android/java/src/org/chromium/chrome/browser/compositor/layouts/LayoutManagerImpl.java b/chrome/android/java/src/org/chromium/chrome/browser/compositor/layouts/LayoutManagerImpl.java
--- a/chrome/android/java/src/org/chromium/chrome/browser/compositor/layouts/LayoutManagerImpl.java
+++ b/chrome/android/java/src/org/chromium/chrome/browser/compositor/layouts/LayoutManagerImpl.java
@@ -26,7 +26,6 @@ import org.chromium.chrome.browser.browser_controls.BrowserControlsStateProvider
 import org.chromium.chrome.browser.browser_controls.BrowserControlsUtils;
 import org.chromium.chrome.browser.browser_controls.BrowserControlsVisibilityManager;
 import org.chromium.chrome.browser.compositor.bottombar.OverlayPanelManager;
-import org.chromium.chrome.browser.compositor.bottombar.contextualsearch.ContextualSearchPanel;
 import org.chromium.chrome.browser.compositor.layouts.Layout.Orientation;
 import org.chromium.chrome.browser.compositor.layouts.components.LayoutTab;
 import org.chromium.chrome.browser.compositor.layouts.content.TabContentManager;
@@ -281,8 +280,7 @@ public class LayoutManagerImpl
                 // it causes relocation tab strip scene layer.
                 StripLayoutHelperManager.class,
                 ScrollingBottomViewSceneLayer.class,
-                StatusIndicatorCoordinator.getSceneOverlayClass(),
-                ContextualSearchPanel.class};
+                StatusIndicatorCoordinator.getSceneOverlayClass()};
         // clang-format on
 
         for (int i = 0; i < overlayOrder.length; i++) mOverlayOrderMap.put(overlayOrder[i], i);
diff --git a/chrome/android/java/src/org/chromium/chrome/browser/customtabs/BaseCustomTabActivity.java b/chrome/android/java/src/org/chromium/chrome/browser/customtabs/BaseCustomTabActivity.java
--- a/chrome/android/java/src/org/chromium/chrome/browser/customtabs/BaseCustomTabActivity.java
+++ b/chrome/android/java/src/org/chromium/chrome/browser/customtabs/BaseCustomTabActivity.java
@@ -155,7 +155,7 @@ public abstract class BaseCustomTabActivity extends ChromeActivity<BaseCustomTab
         mBaseCustomTabRootUiCoordinator = new BaseCustomTabRootUiCoordinator(this,
                 getShareDelegateSupplier(), getActivityTabProvider(), mTabModelProfileSupplier,
                 mBookmarkModelSupplier, mTabBookmarkerSupplier,
-                getContextualSearchManagerSupplier(), getTabModelSelectorSupplier(),
+                null, getTabModelSelectorSupplier(),
                 getBrowserControlsManager(), getWindowAndroid(), getLifecycleDispatcher(),
                 getLayoutManagerSupplier(),
                 /* menuOrKeyboardActionController= */ this, this::getActivityThemeColor,
diff --git a/chrome/android/java/src/org/chromium/chrome/browser/customtabs/BaseCustomTabRootUiCoordinator.java b/chrome/android/java/src/org/chromium/chrome/browser/customtabs/BaseCustomTabRootUiCoordinator.java
--- a/chrome/android/java/src/org/chromium/chrome/browser/customtabs/BaseCustomTabRootUiCoordinator.java
+++ b/chrome/android/java/src/org/chromium/chrome/browser/customtabs/BaseCustomTabRootUiCoordinator.java
@@ -33,7 +33,6 @@ import org.chromium.chrome.browser.compositor.CompositorViewHolder;
 import org.chromium.chrome.browser.compositor.bottombar.ephemeraltab.EphemeralTabCoordinator;
 import org.chromium.chrome.browser.compositor.layouts.LayoutManagerImpl;
 import org.chromium.chrome.browser.compositor.layouts.content.TabContentManager;
-import org.chromium.chrome.browser.contextualsearch.ContextualSearchManager;
 import org.chromium.chrome.browser.crash.ChromePureJavaExceptionReporter;
 import org.chromium.chrome.browser.customtabs.content.CustomTabActivityNavigationController;
 import org.chromium.chrome.browser.customtabs.content.CustomTabActivityTabController;
@@ -93,7 +92,6 @@ public class BaseCustomTabRootUiCoordinator extends RootUiCoordinator {
      * @param profileSupplier Supplier of the currently applicable profile.
      * @param bookmarkModelSupplier Supplier of the bookmark bridge for the current profile.
      * @param tabBookmarkerSupplier Supplier of {@link TabBookmarker} for bookmarking a given tab.
-     * @param contextualSearchManagerSupplier Supplier of the {@link ContextualSearchManager}.
      * @param tabModelSelectorSupplier Supplies the {@link TabModelSelector}.
      * @param browserControlsManager Manages the browser controls.
      * @param windowAndroid The current {@link WindowAndroid}.
@@ -127,7 +125,7 @@ public class BaseCustomTabRootUiCoordinator extends RootUiCoordinator {
             @NonNull ObservableSupplier<Profile> profileSupplier,
             @NonNull ObservableSupplier<BookmarkModel> bookmarkModelSupplier,
             @NonNull ObservableSupplier<TabBookmarker> tabBookmarkerSupplier,
-            @NonNull Supplier<ContextualSearchManager> contextualSearchManagerSupplier,
+            Object ignored,
             @NonNull ObservableSupplier<TabModelSelector> tabModelSelectorSupplier,
             @NonNull BrowserControlsManager browserControlsManager,
             @NonNull ActivityWindowAndroid windowAndroid,
@@ -158,7 +156,7 @@ public class BaseCustomTabRootUiCoordinator extends RootUiCoordinator {
         // clang-format off
         super(activity, null, shareDelegateSupplier, tabProvider,
                 profileSupplier, bookmarkModelSupplier, tabBookmarkerSupplier,
-                contextualSearchManagerSupplier, tabModelSelectorSupplier,
+                null, tabModelSelectorSupplier,
                 new OneshotSupplierImpl<>(), new OneshotSupplierImpl<>(),
                 new OneshotSupplierImpl<>(), new OneshotSupplierImpl<>(), () -> null,
                 browserControlsManager, windowAndroid, new DummyJankTracker(),
@@ -210,16 +208,6 @@ public class BaseCustomTabRootUiCoordinator extends RootUiCoordinator {
                     ((PartialCustomTabHeightStrategy) mCustomTabHeightStrategy)::onShowSoftInput;
             mTabController.get().registerTabObserver(
                     new PartialCustomTabTabObserver(softInputCallback));
-            mTabController.get().registerTabObserver(new EmptyTabObserver() {
-                @Override
-                public void didFirstVisuallyNonEmptyPaint(Tab tab) {
-                    BaseCustomTabActivity baseActivity = (BaseCustomTabActivity) mActivity;
-                    assert baseActivity != null;
-                    baseActivity.getContextualSearchManagerSupplier()
-                            .get()
-                            .setCanHideAndroidBrowserControls(false);
-                }
-            });
         }
     }
 
diff --git a/chrome/android/java/src/org/chromium/chrome/browser/customtabs/CustomTabActivity.java b/chrome/android/java/src/org/chromium/chrome/browser/customtabs/CustomTabActivity.java
--- a/chrome/android/java/src/org/chromium/chrome/browser/customtabs/CustomTabActivity.java
+++ b/chrome/android/java/src/org/chromium/chrome/browser/customtabs/CustomTabActivity.java
@@ -188,12 +188,6 @@ public class CustomTabActivity extends BaseCustomTabActivity {
                 mIntentDataProvider.getSession(), webContents);
     }
 
-    @Override
-    public void createContextualSearchTab(String searchUrl) {
-        if (getActivityTab() == null) return;
-        getActivityTab().loadUrl(new LoadUrlParams(searchUrl));
-    }
-
     @Override
     public String getPackageName() {
         if (mShouldOverridePackage && mIntentDataProvider instanceof CustomTabIntentDataProvider) {
diff --git a/chrome/android/java/src/org/chromium/chrome/browser/modaldialog/ChromeTabModalPresenter.java b/chrome/android/java/src/org/chromium/chrome/browser/modaldialog/ChromeTabModalPresenter.java
--- a/chrome/android/java/src/org/chromium/chrome/browser/modaldialog/ChromeTabModalPresenter.java
+++ b/chrome/android/java/src/org/chromium/chrome/browser/modaldialog/ChromeTabModalPresenter.java
@@ -20,7 +20,6 @@ import org.chromium.chrome.browser.browser_controls.BrowserControlsStateProvider
 import org.chromium.chrome.browser.browser_controls.BrowserControlsUtils;
 import org.chromium.chrome.browser.browser_controls.BrowserControlsVisibilityManager;
 import org.chromium.chrome.browser.compositor.bottombar.OverlayPanel;
-import org.chromium.chrome.browser.contextualsearch.ContextualSearchManager;
 import org.chromium.chrome.browser.fullscreen.FullscreenManager;
 import org.chromium.chrome.browser.omnibox.OmniboxFocusReason;
 import org.chromium.chrome.browser.tab.Tab;
@@ -48,7 +47,6 @@ public class ChromeTabModalPresenter
     private final Activity mActivity;
     private final Supplier<TabObscuringHandler> mTabObscuringHandlerSupplier;
     private final Supplier<ToolbarManager> mToolbarManagerSupplier;
-    private final Supplier<ContextualSearchManager> mContextualSearchManagerSupplier;
     private final FullscreenManager mFullscreenManager;
     private final BrowserControlsVisibilityManager mBrowserControlsVisibilityManager;
     private final TabModalBrowserControlsVisibilityDelegate mVisibilityDelegate;
@@ -95,7 +93,7 @@ public class ChromeTabModalPresenter
     public ChromeTabModalPresenter(Activity activity,
             Supplier<TabObscuringHandler> tabObscuringHandlerSupplier,
             Supplier<ToolbarManager> toolbarManagerSupplier,
-            Supplier<ContextualSearchManager> contextualSearchManagerSupplier,
+            Object ignored,
             FullscreenManager fullscreenManager,
             BrowserControlsVisibilityManager browserControlsVisibilityManager,
             TabModelSelector tabModelSelector) {
@@ -107,7 +105,6 @@ public class ChromeTabModalPresenter
         mBrowserControlsVisibilityManager = browserControlsVisibilityManager;
         mBrowserControlsVisibilityManager.addObserver(this);
         mVisibilityDelegate = new TabModalBrowserControlsVisibilityDelegate();
-        mContextualSearchManagerSupplier = contextualSearchManagerSupplier;
         mTabModelSelector = tabModelSelector;
     }
 
@@ -195,13 +192,6 @@ public class ChromeTabModalPresenter
             assert mActiveTab
                     != null : "Tab modal dialogs should be shown on top of an active tab.";
 
-            // Hide contextual search panel so that bottom toolbar will not be
-            // obscured and back press is not overridden.
-            if (mContextualSearchManagerSupplier.hasValue()) {
-                mContextualSearchManagerSupplier.get().hideContextualSearch(
-                        OverlayPanel.StateChangeReason.UNKNOWN);
-            }
-
             // Dismiss the action bar that obscures the dialogs but preserve the text selection.
             WebContents webContents = mActiveTab.getWebContents();
             if (webContents != null) {
diff --git a/chrome/android/java/src/org/chromium/chrome/browser/modaldialog/TabModalLifetimeHandler.java b/chrome/android/java/src/org/chromium/chrome/browser/modaldialog/TabModalLifetimeHandler.java
--- a/chrome/android/java/src/org/chromium/chrome/browser/modaldialog/TabModalLifetimeHandler.java
+++ b/chrome/android/java/src/org/chromium/chrome/browser/modaldialog/TabModalLifetimeHandler.java
@@ -11,7 +11,6 @@ import org.chromium.base.supplier.ObservableSupplierImpl;
 import org.chromium.base.supplier.Supplier;
 import org.chromium.chrome.browser.back_press.BackPressManager;
 import org.chromium.chrome.browser.browser_controls.BrowserControlsVisibilityManager;
-import org.chromium.chrome.browser.contextualsearch.ContextualSearchManager;
 import org.chromium.chrome.browser.fullscreen.FullscreenManager;
 import org.chromium.chrome.browser.lifecycle.ActivityLifecycleDispatcher;
 import org.chromium.chrome.browser.lifecycle.DestroyObserver;
@@ -72,7 +71,6 @@ public class TabModalLifetimeHandler implements NativeInitObserver, DestroyObser
             mAppVisibilityDelegateSupplier;
     private final Supplier<TabObscuringHandler> mTabObscuringHandlerSupplier;
     private final Supplier<ToolbarManager> mToolbarManagerSupplier;
-    private final Supplier<ContextualSearchManager> mContextualSearchManagerSupplier;
     private final Supplier<TabModelSelector> mTabModelSelectorSupplier;
     private final Supplier<BrowserControlsVisibilityManager>
             mBrowserControlsVisibilityManagerSupplier;
@@ -107,7 +105,7 @@ public class TabModalLifetimeHandler implements NativeInitObserver, DestroyObser
             Supplier<ComposedBrowserControlsVisibilityDelegate> appVisibilityDelegateSupplier,
             Supplier<TabObscuringHandler> tabObscuringHandlerSupplier,
             Supplier<ToolbarManager> toolbarManagerSupplier,
-            Supplier<ContextualSearchManager> contextualSearchManagerSupplier,
+            Object ignored,
             Supplier<TabModelSelector> tabModelSelectorSupplier,
             Supplier<BrowserControlsVisibilityManager> browserControlsVisibilityManagerSupplier,
             Supplier<FullscreenManager> fullscreenManagerSupplier,
@@ -123,7 +121,6 @@ public class TabModalLifetimeHandler implements NativeInitObserver, DestroyObser
         mFullscreenManagerSupplier = fullscreenManagerSupplier;
         mBrowserControlsVisibilityManagerSupplier = browserControlsVisibilityManagerSupplier;
         mVisibilityDelegate = new TabModalBrowserControlsVisibilityDelegate();
-        mContextualSearchManagerSupplier = contextualSearchManagerSupplier;
         mTabModelSelectorSupplier = tabModelSelectorSupplier;
         mBackPressManager = backPressManager;
         if (BackPressManager.isEnabled()) {
@@ -179,7 +176,7 @@ public class TabModalLifetimeHandler implements NativeInitObserver, DestroyObser
         assert mBrowserControlsVisibilityManagerSupplier.hasValue();
         assert mFullscreenManagerSupplier.hasValue();
         mPresenter = new ChromeTabModalPresenter(mActivity, mTabObscuringHandlerSupplier,
-                mToolbarManagerSupplier, mContextualSearchManagerSupplier,
+                mToolbarManagerSupplier, null,
                 mFullscreenManagerSupplier.get(), mBrowserControlsVisibilityManagerSupplier.get(),
                 tabModelSelector);
         assert mAppVisibilityDelegateSupplier.hasValue();
diff --git a/chrome/android/java/src/org/chromium/chrome/browser/privacy/settings/PrivacySettings.java b/chrome/android/java/src/org/chromium/chrome/browser/privacy/settings/PrivacySettings.java
--- a/chrome/android/java/src/org/chromium/chrome/browser/privacy/settings/PrivacySettings.java
+++ b/chrome/android/java/src/org/chromium/chrome/browser/privacy/settings/PrivacySettings.java
@@ -41,7 +41,6 @@ import org.chromium.ui.text.SpanApplier;
 
 import androidx.annotation.Nullable;
 import androidx.preference.PreferenceCategory;
-import org.chromium.chrome.browser.contextualsearch.ContextualSearchManager;
 import org.chromium.chrome.browser.preferences.SharedPreferencesManager;
 import org.chromium.components.browser_ui.settings.ChromeSwitchPreference;
 
@@ -63,9 +62,7 @@ public class PrivacySettings
     // moved from SyncAndServicesSettings.java
     private static final String PREF_SERVICES_CATEGORY = "services_category";
     private static final String PREF_SEARCH_SUGGESTIONS = "search_suggestions";
-    private static final String PREF_CONTEXTUAL_SEARCH = "contextual_search";
     private ChromeSwitchPreference mSearchSuggestions;
-    private @Nullable Preference mContextualSearch;
     private final SharedPreferencesManager mSharedPreferencesManager =
             SharedPreferencesManager.getInstance();
     private final PrefService prefService = UserPrefs.get(Profile.getLastUsedRegularProfile());
@@ -113,12 +110,6 @@ public class PrivacySettings
         mSearchSuggestions.setOnPreferenceChangeListener(this);
         mSearchSuggestions.setManagedPreferenceDelegate(mManagedPreferenceDelegate);
 
-        mContextualSearch = findPreference(PREF_CONTEXTUAL_SEARCH);
-        boolean isContextualSearchEnabled =
-                !ContextualSearchManager.isContextualSearchDisabled();
-        mContextualSearch.setSummary(
-                isContextualSearchEnabled ? R.string.text_on : R.string.text_off);
-
         ChromeSwitchPreference canMakePaymentPref =
                 (ChromeSwitchPreference) findPreference(PREF_CAN_MAKE_PAYMENT);
         canMakePaymentPref.setOnPreferenceChangeListener(this);
diff --git a/chrome/android/java/src/org/chromium/chrome/browser/tab/TabHelpers.java b/chrome/android/java/src/org/chromium/chrome/browser/tab/TabHelpers.java
--- a/chrome/android/java/src/org/chromium/chrome/browser/tab/TabHelpers.java
+++ b/chrome/android/java/src/org/chromium/chrome/browser/tab/TabHelpers.java
@@ -8,7 +8,6 @@ import org.chromium.chrome.browser.SwipeRefreshHandler;
 import org.chromium.chrome.browser.accessibility.AccessibilityTabHelper;
 import org.chromium.chrome.browser.autofill_assistant.AutofillAssistantTabHelper;
 import org.chromium.chrome.browser.complex_tasks.TaskTabHelper;
-import org.chromium.chrome.browser.contextualsearch.ContextualSearchTabHelper;
 import org.chromium.chrome.browser.crypto.CipherFactory;
 import org.chromium.chrome.browser.dom_distiller.ReaderModeManager;
 import org.chromium.chrome.browser.dom_distiller.TabDistillabilityProvider;
@@ -33,7 +32,6 @@ public final class TabHelpers {
         TabUma.createForTab(tab);
         TabDistillabilityProvider.createForTab(tab);
         InterceptNavigationDelegateTabHelper.createForTab(tab);
-        ContextualSearchTabHelper.createForTab(tab);
         MediaSessionTabHelper.createForTab(tab);
         TaskTabHelper.createForTab(tab, parentTab);
         TabBrowserControlsConstraintsHelper.createForTab(tab);
diff --git a/chrome/android/java/src/org/chromium/chrome/browser/tabbed_mode/TabbedRootUiCoordinator.java b/chrome/android/java/src/org/chromium/chrome/browser/tabbed_mode/TabbedRootUiCoordinator.java
--- a/chrome/android/java/src/org/chromium/chrome/browser/tabbed_mode/TabbedRootUiCoordinator.java
+++ b/chrome/android/java/src/org/chromium/chrome/browser/tabbed_mode/TabbedRootUiCoordinator.java
@@ -39,7 +39,6 @@ import org.chromium.chrome.browser.compositor.CompositorViewHolder;
 import org.chromium.chrome.browser.compositor.bottombar.ephemeraltab.EphemeralTabCoordinator;
 import org.chromium.chrome.browser.compositor.layouts.LayoutManagerImpl;
 import org.chromium.chrome.browser.compositor.layouts.content.TabContentManager;
-import org.chromium.chrome.browser.contextualsearch.ContextualSearchManager;
 import org.chromium.chrome.browser.feature_guide.notifications.FeatureNotificationUtils;
 import org.chromium.chrome.browser.feature_guide.notifications.FeatureType;
 import org.chromium.chrome.browser.feed.webfeed.WebFeedFollowIntroController;
@@ -260,7 +259,7 @@ public class TabbedRootUiCoordinator extends RootUiCoordinator {
             @NonNull ObservableSupplier<Profile> profileSupplier,
             @NonNull ObservableSupplier<BookmarkModel> bookmarkModelSupplier,
             @NonNull ObservableSupplier<TabBookmarker> tabBookmarkerSupplier,
-            @NonNull Supplier<ContextualSearchManager> contextualSearchManagerSupplier,
+            Object ignored,
             @NonNull ObservableSupplier<TabModelSelector> tabModelSelectorSupplier,
             @NonNull OneshotSupplier<StartSurface> startSurfaceSupplier,
             @NonNull OneshotSupplier<TabSwitcher> tabSwitcherSupplier,
@@ -295,7 +294,7 @@ public class TabbedRootUiCoordinator extends RootUiCoordinator {
             boolean initializeUiWithIncognitoColors, @NonNull BackPressManager backPressManager) {
         super(activity, onOmniboxFocusChangedListener, shareDelegateSupplier, tabProvider,
                 profileSupplier, bookmarkModelSupplier, tabBookmarkerSupplier,
-                contextualSearchManagerSupplier, tabModelSelectorSupplier, startSurfaceSupplier,
+                null, tabModelSelectorSupplier, startSurfaceSupplier,
                 tabSwitcherSupplier, intentMetadataOneshotSupplier,
                 layoutStateProviderOneshotSupplier, startSurfaceParentTabSupplier,
                 browserControlsManager, windowAndroid, jankTracker, activityLifecycleDispatcher,
diff --git a/chrome/android/java/src/org/chromium/chrome/browser/ui/RootUiCoordinator.java b/chrome/android/java/src/org/chromium/chrome/browser/ui/RootUiCoordinator.java
--- a/chrome/android/java/src/org/chromium/chrome/browser/ui/RootUiCoordinator.java
+++ b/chrome/android/java/src/org/chromium/chrome/browser/ui/RootUiCoordinator.java
@@ -55,7 +55,6 @@ import org.chromium.chrome.browser.compositor.bottombar.OverlayPanelManager;
 import org.chromium.chrome.browser.compositor.bottombar.ephemeraltab.EphemeralTabCoordinator;
 import org.chromium.chrome.browser.compositor.layouts.LayoutManagerImpl;
 import org.chromium.chrome.browser.compositor.layouts.content.TabContentManager;
-import org.chromium.chrome.browser.contextualsearch.ContextualSearchManager;
 import org.chromium.chrome.browser.crash.ChromePureJavaExceptionReporter;
 import org.chromium.chrome.browser.directactions.DirectActionInitializer;
 import org.chromium.chrome.browser.dom_distiller.ReaderModeToolbarButtonController;
@@ -99,7 +98,6 @@ import org.chromium.chrome.browser.preferences.SharedPreferencesManager;
 import org.chromium.chrome.browser.price_tracking.PriceTrackingButtonController;
 import org.chromium.chrome.browser.profiles.Profile;
 import org.chromium.chrome.browser.search_engines.TemplateUrlServiceFactory;
-import org.chromium.chrome.browser.segmentation_platform.ContextualPageActionController;
 import org.chromium.chrome.browser.settings.SettingsLauncherImpl;
 import org.chromium.chrome.browser.share.ShareButtonController;
 import org.chromium.chrome.browser.share.ShareDelegate;
@@ -246,7 +244,6 @@ public class RootUiCoordinator
     private List<ButtonDataProvider> mButtonDataProviders;
     @Nullable
     private AdaptiveToolbarButtonController mAdaptiveToolbarButtonController;
-    private ContextualPageActionController mContextualPageActionController;
     private IdentityDiscController mIdentityDiscController;
     private ChromeActionModeHandler mChromeActionModeHandler;
     private final ToolbarActionModeCallback mActionModeControllerCallback;
@@ -259,7 +256,6 @@ public class RootUiCoordinator
     private final ObservableSupplier<TabBookmarker> mTabBookmarkerSupplier;
     private final OneshotSupplierImpl<AppMenuCoordinator> mAppMenuSupplier;
     private BottomSheetObserver mBottomSheetObserver;
-    private final Supplier<ContextualSearchManager> mContextualSearchManagerSupplier;
     protected final CallbackController mCallbackController;
     protected final BrowserControlsManager mBrowserControlsManager;
     private BrowserControlsStateProvider.Observer mBrowserControlsObserver;
@@ -364,7 +360,7 @@ public class RootUiCoordinator
             @NonNull ObservableSupplier<Profile> profileSupplier,
             @NonNull ObservableSupplier<BookmarkModel> bookmarkModelSupplier,
             @NonNull ObservableSupplier<TabBookmarker> tabBookmarkerSupplier,
-            @NonNull Supplier<ContextualSearchManager> contextualSearchManagerSupplier,
+            Object ignored,
             @NonNull ObservableSupplier<TabModelSelector> tabModelSelectorSupplier,
             @NonNull OneshotSupplier<StartSurface> startSurfaceSupplier,
             @NonNull OneshotSupplier<TabSwitcher> tabSwitcherSupplier,
@@ -457,7 +453,6 @@ public class RootUiCoordinator
         mBookmarkModelSupplier = bookmarkModelSupplier;
         mTabBookmarkerSupplier = tabBookmarkerSupplier;
         mAppMenuSupplier = new OneshotSupplierImpl<>();
-        mContextualSearchManagerSupplier = contextualSearchManagerSupplier;
         mActionModeControllerCallback = new ToolbarActionModeCallback();
 
         mTabModelSelectorSupplier = tabModelSelectorSupplier;
@@ -561,11 +556,6 @@ public class RootUiCoordinator
             mToolbarManager = null;
         }
 
-        if (mContextualPageActionController != null) {
-            mContextualPageActionController.destroy();
-            mContextualPageActionController = null;
-        }
-
         if (mAdaptiveToolbarButtonController != null) {
             mAdaptiveToolbarButtonController.destroy();
             mAdaptiveToolbarButtonController = null;
@@ -1004,15 +994,6 @@ public class RootUiCoordinator
 
     @Override
     public boolean canShowAppMenu() {
-        // TODO(https:crbug.com/931496): Eventually the ContextualSearchManager,
-        // EphemeralTabCoordinator, and FindToolbarManager will all be owned by this class.
-
-        // Do not show the menu if Contextual Search panel is opened.
-        if (mContextualSearchManagerSupplier.get() != null
-                && mContextualSearchManagerSupplier.get().isSearchPanelOpened()) {
-            return false;
-        }
-
         // Do not show the menu if we are in find in page view.
         if (mFindToolbarManager != null && mFindToolbarManager.isShowing()
                 && !DeviceFormFactor.isNonMultiDisplayContextOnTablet(mActivity)) {
@@ -1167,11 +1148,6 @@ public class RootUiCoordinator
                     AdaptiveToolbarButtonVariant.PRICE_TRACKING, priceTrackingButtonController);
             adaptiveToolbarButtonController.addButtonVariant(
                     AdaptiveToolbarButtonVariant.READER_MODE, readerModeToolbarButtonController);
-            mContextualPageActionController = new ContextualPageActionController(mProfileSupplier,
-                    mActivityTabProvider, adaptiveToolbarButtonController,
-                    ()
-                            -> ShoppingServiceFactory.getForProfile(mProfileSupplier.get()),
-                    mBookmarkModelSupplier);
             mButtonDataProviders =
                     Arrays.asList(mIdentityDiscController, adaptiveToolbarButtonController);
 
@@ -1241,10 +1217,6 @@ public class RootUiCoordinator
             public void onStartedShowing(int layoutType, boolean showToolbar) {
                 if (layoutType != LayoutType.BROWSING
                         && layoutType != LayoutType.SIMPLE_ANIMATION) {
-                    // Hide contextual search.
-                    if (mContextualSearchManagerSupplier.get() != null) {
-                        mContextualSearchManagerSupplier.get().dismissContextualSearchBar();
-                    }
                 }
 
                 if (layoutType == LayoutType.TAB_SWITCHER) {
@@ -1365,10 +1337,6 @@ public class RootUiCoordinator
      * cross-feature interaction, e.g. hide other features when this feature is shown.
      */
     protected void onFindToolbarShown() {
-        if (mContextualSearchManagerSupplier.get() != null) {
-            mContextualSearchManagerSupplier.get().hideContextualSearch(
-                    OverlayPanel.StateChangeReason.UNKNOWN);
-        }
     }
 
     /**
@@ -1526,9 +1494,6 @@ public class RootUiCoordinator
                     case SheetState.FULL:
                         if (!mOpened) {
                             mOpened = true;
-                            ContextualSearchManager manager =
-                                    mContextualSearchManagerSupplier.get();
-                            if (manager != null) manager.onBottomSheetVisible(true);
                         }
 
                         // On visible bottom sheet, hide page zoom dialog
@@ -1536,8 +1501,6 @@ public class RootUiCoordinator
                         break;
                     case SheetState.HIDDEN:
                         mOpened = false;
-                        ContextualSearchManager manager = mContextualSearchManagerSupplier.get();
-                        if (manager != null) manager.onBottomSheetVisible(false);
                         break;
                 }
             }
diff --git a/chrome/browser/BUILD.gn b/chrome/browser/BUILD.gn
--- a/chrome/browser/BUILD.gn
+++ b/chrome/browser/BUILD.gn
@@ -2086,7 +2086,6 @@ static_library("browser") {
     "//components/content_settings/common:mojom",
     "//components/content_settings/core/browser",
     "//components/content_settings/core/common",
-    "//components/contextual_search/core/browser",
     "//components/cookie_config",
     "//components/country_codes",
     "//components/crash/core/browser",
@@ -2563,8 +2562,6 @@ static_library("browser") {
       "android/compositor/decoration_title.h",
       "android/compositor/layer/content_layer.cc",
       "android/compositor/layer/content_layer.h",
-      "android/compositor/layer/contextual_search_layer.cc",
-      "android/compositor/layer/contextual_search_layer.h",
       "android/compositor/layer/layer.h",
       "android/compositor/layer/overlay_panel_layer.cc",
       "android/compositor/layer/overlay_panel_layer.h",
@@ -2585,8 +2582,6 @@ static_library("browser") {
       "android/compositor/resources/resource_factory.cc",
       "android/compositor/resources/toolbar_resource.cc",
       "android/compositor/resources/toolbar_resource.h",
-      "android/compositor/scene_layer/contextual_search_scene_layer.cc",
-      "android/compositor/scene_layer/contextual_search_scene_layer.h",
       "android/compositor/scene_layer/overscroll_scene_layer.cc",
       "android/compositor/scene_layer/overscroll_scene_layer.h",
       "android/compositor/scene_layer/scrolling_bottom_view_scene_layer.cc",
@@ -2609,16 +2604,6 @@ static_library("browser") {
       "android/content/content_utils.cc",
       "android/context_menu/context_menu_native_delegate_impl.cc",
       "android/context_menu/context_menu_native_delegate_impl.h",
-      "android/contextualsearch/contextual_search_manager.cc",
-      "android/contextualsearch/contextual_search_manager.h",
-      "android/contextualsearch/contextual_search_tab_helper.cc",
-      "android/contextualsearch/contextual_search_tab_helper.h",
-      "android/contextualsearch/native_contextual_search_context.cc",
-      "android/contextualsearch/native_contextual_search_context.h",
-      "android/contextualsearch/unhandled_tap_notifier_impl.cc",
-      "android/contextualsearch/unhandled_tap_notifier_impl.h",
-      "android/contextualsearch/unhandled_tap_web_contents_observer.cc",
-      "android/contextualsearch/unhandled_tap_web_contents_observer.h",
       "android/cookies/cookies_fetcher_util.cc",
       "android/customtabs/chrome_origin_verifier.cc",
       "android/customtabs/chrome_origin_verifier.h",
@@ -3193,8 +3178,6 @@ static_library("browser") {
       "safe_browsing/android/safe_browsing_referring_app_bridge_android.h",
       "safe_browsing/android/safe_browsing_settings_launcher_android.cc",
       "safe_browsing/android/safe_browsing_settings_launcher_android.h",
-      "search/contextual_search_policy_handler_android.cc",
-      "search/contextual_search_policy_handler_android.h",
       "search_engines/template_url_service_factory_android.cc",
       "search_engines/ui_thread_search_terms_data_android.cc",
       "search_engines/ui_thread_search_terms_data_android.h",
diff --git a/chrome/browser/about_flags.cc b/chrome/browser/about_flags.cc
--- a/chrome/browser/about_flags.cc
+++ b/chrome/browser/about_flags.cc
@@ -2045,27 +2045,6 @@ const FeatureEntry::FeatureVariation kRelatedSearchesInBarVariations[] = {
      kRelatedSearchesInBarShowDefaultChipWith120SpEllipsis,
      std::size(kRelatedSearchesInBarShowDefaultChipWith120SpEllipsis), nullptr},
 };
-
-const FeatureEntry::FeatureParam kContextualSearchSuppressShortViewWith300Dp[] =
-    {{"contextual_search_minimum_page_height_dp", "300"}};
-const FeatureEntry::FeatureParam kContextualSearchSuppressShortViewWith400Dp[] =
-    {{"contextual_search_minimum_page_height_dp", "400"}};
-const FeatureEntry::FeatureParam kContextualSearchSuppressShortViewWith500Dp[] =
-    {{"contextual_search_minimum_page_height_dp", "500"}};
-const FeatureEntry::FeatureParam kContextualSearchSuppressShortViewWith600Dp[] =
-    {{"contextual_search_minimum_page_height_dp", "600"}};
-const FeatureEntry::FeatureVariation
-    kContextualSearchSuppressShortViewVariations[] = {
-        {"(300 dp)", kContextualSearchSuppressShortViewWith300Dp,
-         std::size(kContextualSearchSuppressShortViewWith300Dp), nullptr},
-        {"(400 dp)", kContextualSearchSuppressShortViewWith400Dp,
-         std::size(kContextualSearchSuppressShortViewWith400Dp), nullptr},
-        {"(500 dp)", kContextualSearchSuppressShortViewWith500Dp,
-         std::size(kContextualSearchSuppressShortViewWith500Dp), nullptr},
-        {"(600 dp)", kContextualSearchSuppressShortViewWith600Dp,
-         std::size(kContextualSearchSuppressShortViewWith600Dp), nullptr},
-};
-
 #endif  // BUILDFLAG(IS_ANDROID)
 
 const FeatureEntry::FeatureParam kResamplingInputEventsLSQEnabled[] = {
@@ -3755,21 +3734,6 @@ const FeatureEntry kFeatureEntries[] = {
      flag_descriptions::kEnableOskResizesVisualViewportByDefaultDescription,
      kOsAndroid,
      FEATURE_VALUE_TYPE(blink::features::kOSKResizesVisualViewportByDefault)},
-    {"contextual-search-debug", flag_descriptions::kContextualSearchDebugName,
-     flag_descriptions::kContextualSearchDebugDescription, kOsAndroid,
-     FEATURE_VALUE_TYPE(kContextualSearchDebug)},
-    {"contextual-search-force-caption",
-     flag_descriptions::kContextualSearchForceCaptionName,
-     flag_descriptions::kContextualSearchForceCaptionDescription, kOsAndroid,
-     FEATURE_VALUE_TYPE(chrome::android::kContextualSearchForceCaption)},
-    {"contextual-search-suppress-short-view",
-     flag_descriptions::kContextualSearchSuppressShortViewName,
-     flag_descriptions::kContextualSearchSuppressShortViewDescription,
-     kOsAndroid,
-     FEATURE_WITH_PARAMS_VALUE_TYPE(
-         chrome::android::kContextualSearchSuppressShortView,
-         kContextualSearchSuppressShortViewVariations,
-         "ContextualSearchSuppressShortView")},
     {"explore-sites", flag_descriptions::kExploreSitesName,
      flag_descriptions::kExploreSitesDescription, kOsAndroid,
      FEATURE_WITH_PARAMS_VALUE_TYPE(chrome::android::kExploreSites,
diff --git a/chrome/browser/flags/android/chrome_feature_list.cc b/chrome/browser/flags/android/chrome_feature_list.cc
--- a/chrome/browser/flags/android/chrome_feature_list.cc
+++ b/chrome/browser/flags/android/chrome_feature_list.cc
@@ -36,7 +36,6 @@
 #include "components/content_creation/notes/core/note_features.h"
 #include "components/content_creation/reactions/core/reactions_features.h"
 #include "components/content_settings/core/common/features.h"
-#include "components/contextual_search/core/browser/contextual_search_field_trial.h"
 #include "components/download/public/common/download_features.h"
 #include "components/embedder_support/android/util/cdn_utils.h"
 #include "components/feature_engagement/public/feature_list.h"
@@ -229,12 +228,6 @@ const base::Feature* const kFeaturesExposedToJava[] = {
     &kContextMenuSearchAndShopWithGoogleLens,
     &kContextMenuTranslateWithGoogleLens,
     &kContextMenuPopupForAllScreenSizes,
-    &kContextualSearchDebug,
-    &kContextualSearchDelayedIntelligence,
-    &kContextualSearchDisableOnlineDetection,
-    &kContextualSearchForceCaption,
-    &kContextualSearchSuppressShortView,
-    &kContextualSearchThinWebViewImplementation,
     &kDirectActions,
     &kDownloadFileProvider,
     &kDownloadNotificationBadge,
@@ -711,26 +704,6 @@ BASE_FEATURE(kLensOnQuickActionSearchWidget,
              "LensOnQuickActionSearchWidget",
              base::FEATURE_ENABLED_BY_DEFAULT);
 
-BASE_FEATURE(kContextualSearchDelayedIntelligence,
-             "ContextualSearchDelayedIntelligence",
-             base::FEATURE_DISABLED_BY_DEFAULT);
-
-BASE_FEATURE(kContextualSearchDisableOnlineDetection,
-             "ContextualSearchDisableOnlineDetection",
-             base::FEATURE_DISABLED_BY_DEFAULT);
-
-BASE_FEATURE(kContextualSearchForceCaption,
-             "ContextualSearchForceCaption",
-             base::FEATURE_DISABLED_BY_DEFAULT);
-
-BASE_FEATURE(kContextualSearchSuppressShortView,
-             "ContextualSearchSuppressShortView",
-             base::FEATURE_DISABLED_BY_DEFAULT);
-
-BASE_FEATURE(kContextualSearchThinWebViewImplementation,
-             "ContextualSearchThinWebViewImplementation",
-             base::FEATURE_DISABLED_BY_DEFAULT);
-
 BASE_FEATURE(kDirectActions, "DirectActions", base::FEATURE_ENABLED_BY_DEFAULT);
 
 BASE_FEATURE(kDownloadAutoResumptionThrottling,
@@ -740,7 +713,6 @@ BASE_FEATURE(kDownloadAutoResumptionThrottling,
 BASE_FEATURE(kDownloadHomeForExternalApp,
              "DownloadHomeForExternalApp",
              base::FEATURE_ENABLED_BY_DEFAULT);
-
 BASE_FEATURE(kDownloadFileProvider,
              "DownloadFileProvider",
              base::FEATURE_ENABLED_BY_DEFAULT);
diff --git a/chrome/browser/flags/android/chrome_feature_list.h b/chrome/browser/flags/android/chrome_feature_list.h
--- a/chrome/browser/flags/android/chrome_feature_list.h
+++ b/chrome/browser/flags/android/chrome_feature_list.h
@@ -76,11 +76,6 @@ BASE_DECLARE_FEATURE(kContextMenuSearchWithGoogleLens);
 BASE_DECLARE_FEATURE(kContextMenuShopWithGoogleLens);
 BASE_DECLARE_FEATURE(kContextMenuSearchAndShopWithGoogleLens);
 BASE_DECLARE_FEATURE(kContextMenuTranslateWithGoogleLens);
-BASE_DECLARE_FEATURE(kContextualSearchDelayedIntelligence);
-BASE_DECLARE_FEATURE(kContextualSearchDisableOnlineDetection);
-BASE_DECLARE_FEATURE(kContextualSearchForceCaption);
-BASE_DECLARE_FEATURE(kContextualSearchSuppressShortView);
-BASE_DECLARE_FEATURE(kContextualSearchThinWebViewImplementation);
 BASE_DECLARE_FEATURE(kDirectActions);
 BASE_DECLARE_FEATURE(kDontPrefetchLibraries);
 BASE_DECLARE_FEATURE(kDownloadAutoResumptionThrottling);
diff --git a/chrome/browser/policy/configuration_policy_handler_list_factory.cc b/chrome/browser/policy/configuration_policy_handler_list_factory.cc
--- a/chrome/browser/policy/configuration_policy_handler_list_factory.cc
+++ b/chrome/browser/policy/configuration_policy_handler_list_factory.cc
@@ -121,7 +121,6 @@
 #if BUILDFLAG(IS_ANDROID)
 #include "chrome/browser/first_run/android/first_run_prefs.h"
 #include "chrome/browser/lens/android/lens_prefs.h"
-#include "chrome/browser/search/contextual_search_policy_handler_android.h"
 #else  // BUILDFLAG(IS_ANDROID)
 #include "chrome/browser/download/default_download_dir_policy_handler.h"
 #include "chrome/browser/download/download_auto_open_policy_handler.h"
@@ -1863,10 +1862,7 @@ std::unique_ptr<ConfigurationPolicyHandlerList> BuildHandlerList(
       std::make_unique<URLBlocklistPolicyHandler>(key::kURLBlocklist));
   // Policies for all platforms - End
 
-#if BUILDFLAG(IS_ANDROID)
-  handlers->AddHandler(
-      std::make_unique<ContextualSearchPolicyHandlerAndroid>());
-#else
+#if !BUILDFLAG(IS_ANDROID)
   handlers->AddHandler(std::make_unique<BrowsingHistoryPolicyHandler>());
   handlers->AddHandler(std::make_unique<BrowsingDataLifetimePolicyHandler>(
       key::kClearBrowsingDataOnExitList,
diff --git a/chrome/browser/ui/android/strings/android_chrome_strings.grd b/chrome/browser/ui/android/strings/android_chrome_strings.grd
--- a/chrome/browser/ui/android/strings/android_chrome_strings.grd
+++ b/chrome/browser/ui/android/strings/android_chrome_strings.grd
@@ -791,33 +791,6 @@ CHAR_LIMIT guidelines:
       <message name="IDS_PREFS_PRIVACY_SECURITY" desc="Title for the Privacy and Security preferences. [CHAR_LIMIT=32]">
         Privacy and security
       </message>
-      <message name="IDS_CONTEXTUAL_SEARCH_TITLE" desc="Name for the Contextual Search feature, which allows users to search for a term in a web page by tapping on it.">
-        Touch to Search
-      </message>
-      <message name="IDS_CONTEXTUAL_SEARCH_DESCRIPTION" desc="Description for Contextual Search preference">
-        Learn about topics on websites without leaving the page. Select one or more words on the page to search for them.
-      </message>
-      <message name="IDS_CONTEXTUAL_SEARCH_PROMO_TITLE" desc="The title of the promo message for the contextual search.">
-        Include surrounding text in Google searches?
-      </message>
-      <message name="IDS_CONTEXTUAL_SEARCH_PROMO_DESCRIPTION" desc="A promo message shown to users with Touch to Search to explain the new behavior and provide an option to opt in or out">
-        By including more of a page’s text, you might see better results when using Touch to Search. You can always visit <ph name="BEGIN_LINK">&lt;link&gt;</ph>settings<ph name="END_LINK">&lt;/link&gt;</ph> to change this.
-      </message>
-      <message name="IDS_CONTEXTUAL_SEARCH_INCLUDE_BUTTON" desc="A button to confirm and dismiss opt in promo">
-        Include
-      </message>
-      <message name="IDS_CONTEXTUAL_SEARCH_NO_THANKS_BUTTON" desc="A button to confirm and dismiss opt out promo">
-        No thanks
-      </message>
-      <message name="IDS_CONTEXTUAL_SEARCH_DEFAULT_CAPTION" desc="Summary help text that is shown as a second line in the Contextual Search peeking bottom sheet telling the user that they can tap the text in order to open the sheet and see search results there.">
-        Tap to see search results
-      </message>
-      <message name="IDS_CONTEXTUAL_SEARCH_SEE_BETTER_RESULTS_TITLE" desc="Title for the see better results switch in Contextual Search preference.">
-        Include surrounding text in Google searches
-      </message>
-      <message name="IDS_CONTEXTUAL_SEARCH_SEE_BETTER_RESULTS_SUMMARY" desc="Summary for the see better results switch in Contextual Search preference.">
-        By including more of a page’s text, you might see better results
-      </message>
       <message name="IDS_DO_NOT_TRACK_TITLE" desc="Title for 'Do Not Track' preference">
         “Do Not Track”
       </message>
@@ -3974,38 +3947,6 @@ To change this setting, <ph name="BEGIN_LINK">&lt;resetlink&gt;</ph>reset sync<p
         Tabs
       </message>
 
-      <!-- Contextual Search -->
-      <message name="IDS_CONTEXTUAL_SEARCH_NETWORK_UNAVAILABLE" desc="Tells the user the network is not accessible.">
-        Unable to access the network
-      </message>
-      <message name="IDS_CONTEXTUAL_SEARCH_ERROR" desc="A network error message">
-        Error: <ph name="ERROR_CODE">%1$s<ex>404</ex></ph>
-      </message>
-      <message name="IDS_CONTEXTUAL_SEARCH_QUICK_ACTION_CAPTION_OPEN" desc="Caption displayed in the Contextual Search bar prompting the user to open an app related to the selected text e.g. when an address is selected the caption will say 'Open in Maps'.">
-        Open in <ph name="APP_NAME">%1$s<ex>Maps</ex></ph>
-      </message>
-      <message name="IDS_CONTEXTUAL_SEARCH_QUICK_ACTION_CAPTION_GENERIC_MAP" desc="Caption displayed in the Contextual Search bar prompting the user to open a maps app with the selected address. This is displayed if more than one app may be used to open the address.">
-        Open in maps app
-      </message>
-      <message name="IDS_CONTEXTUAL_SEARCH_QUICK_ACTION_CAPTION_EMAIL" desc="Caption displayed in the Contextual Search bar prompting the user to create an email addressed to the selected email address.">
-        Create email in <ph name="APP_NAME">%1$s<ex>Gmail</ex></ph>
-      </message>
-      <message name="IDS_CONTEXTUAL_SEARCH_QUICK_ACTION_CAPTION_GENERIC_EMAIL" desc="Caption displayed in the Contextual Search bar prompting the user to create an email addressed to the selected email address. This is displayed if more than one app may be used to create the email.">
-        Create email
-      </message>
-      <message name="IDS_CONTEXTUAL_SEARCH_QUICK_ACTION_CAPTION_EVENT" desc="Caption displayed in the Contextual Search bar prompting the user to create an event using the selected date/time.">
-        Create event in <ph name="APP_NAME">%1$s<ex>Calendar</ex></ph>
-      </message>
-      <message name="IDS_CONTEXTUAL_SEARCH_QUICK_ACTION_CAPTION_GENERIC_EVENT" desc="Caption displayed in the Contextual Search bar prompting the user to create an event using the selected date/time. This is displayed if more than one app may be used to create the event.">
-        Create event
-      </message>
-      <message name="IDS_CONTEXTUAL_SEARCH_QUICK_ACTION_CAPTION_PHONE" desc="Caption displayed in the Contextual Search bar prompting the user to call the selected phone number.">
-        Call
-      </message>
-      <message name="IDS_CONTEXTUAL_SEARCH_QUICK_ACTION_CAPTION_GENERIC_WEBSITE" desc="Caption displayed in the Contextual Search bar prompting the user to navigate to a web page.">
-        Go to page
-      </message>
-
       <!-- Web apps -->
       <message name="IDS_WEBAPP_ACTIVITY_TITLE" desc="Title in recent tasks list for web apps, i.e. web pages that are shown in a separate window">
         Web App
diff --git a/content/browser/browser_interface_binders.cc b/content/browser/browser_interface_binders.cc
--- a/content/browser/browser_interface_binders.cc
+++ b/content/browser/browser_interface_binders.cc
@@ -178,7 +178,6 @@
 #include "content/browser/renderer_host/render_widget_host_view_android.h"
 #include "services/device/public/mojom/nfc.mojom.h"
 #include "third_party/blink/public/mojom/hid/hid.mojom.h"
-#include "third_party/blink/public/mojom/unhandled_tap_notifier/unhandled_tap_notifier.mojom.h"
 #else  // BUILDFLAG(IS_ANDROID)
 #include "content/browser/direct_sockets/direct_sockets_service_impl.h"
 #include "media/mojo/mojom/renderer_extensions.mojom.h"
diff --git a/third_party/blink/public/mojom/BUILD.gn b/third_party/blink/public/mojom/BUILD.gn
--- a/third_party/blink/public/mojom/BUILD.gn
+++ b/third_party/blink/public/mojom/BUILD.gn
@@ -926,8 +926,8 @@ mojom("android_mojo_bindings") {
   # This Android unhandled-tap feature uses another mojo source, add it in.
   if (enable_unhandled_tap) {
     sources += [ "unhandled_tap_notifier/unhandled_tap_notifier.mojom" ]
-    public_deps += [ "//ui/gfx/geometry/mojom" ]
   }
+  public_deps += [ "//ui/gfx/geometry/mojom" ]
 
   cpp_typemaps = [
     {
diff --git a/third_party/blink/public/public_features.gni b/third_party/blink/public/public_features.gni
--- a/third_party/blink/public/public_features.gni
+++ b/third_party/blink/public/public_features.gni
@@ -12,7 +12,7 @@ declare_args() {
 # Unhandled Tap enable means Contextual Search aka Touch to Search.
 # TODO(donnd): remove all unhandled-tap handling after the Long-press experiment
 #              is fully launched.
-enable_unhandled_tap = is_android
+enable_unhandled_tap = false
 
 # Use Minikin hyphenation engine.
 use_minikin_hyphenation = !is_mac
--
2.25.1
