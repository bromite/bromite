From: Your Name <you@example.com>
Date: Thu, 5 Jan 2023 11:26:25 +0000
Subject: Remove binary blob integrations (add fixup)

---
 chrome/android/java/AndroidManifest.xml                   | 2 ++
 chrome/browser/privacy/BUILD.gn                           | 1 +
 .../browser/ui/signin/fre/SigninFirstRunMediator.java     | 8 ++------
 3 files changed, 5 insertions(+), 6 deletions(-)

diff --git a/chrome/android/java/AndroidManifest.xml b/chrome/android/java/AndroidManifest.xml
--- a/chrome/android/java/AndroidManifest.xml
+++ b/chrome/android/java/AndroidManifest.xml
@@ -751,6 +751,8 @@ by a child template that "extends" this file.
             android:theme="@style/Theme.BrowserUI.Translucent.NoTitleBar"
             android:excludeFromRecents="true"
             android:process=":browser_restart_process">
+        </activity>
+
         <activity
             android:name="org.chromium.chrome.browser.sharing.shared_intent.SharedIntentShareActivity"
             android:icon="@drawable/ic_launcher"
diff --git a/chrome/browser/privacy/BUILD.gn b/chrome/browser/privacy/BUILD.gn
--- a/chrome/browser/privacy/BUILD.gn
+++ b/chrome/browser/privacy/BUILD.gn
@@ -11,6 +11,7 @@ if (is_android) {
       "//chrome/android:*",
       "//chrome/browser/feed/android:*",
       "//chrome/browser/ui/android/omnibox:*",
+      "//chrome/browser/ui/android/signin:*",
     ]
     sources = [
       "java/src/org/chromium/chrome/browser/privacy/secure_dns/SecureDnsBridge.java",
diff --git a/chrome/browser/ui/android/signin/java/src/org/chromium/chrome/browser/ui/signin/fre/SigninFirstRunMediator.java b/chrome/browser/ui/android/signin/java/src/org/chromium/chrome/browser/ui/signin/fre/SigninFirstRunMediator.java
--- a/chrome/browser/ui/android/signin/java/src/org/chromium/chrome/browser/ui/signin/fre/SigninFirstRunMediator.java
+++ b/chrome/browser/ui/android/signin/java/src/org/chromium/chrome/browser/ui/signin/fre/SigninFirstRunMediator.java
@@ -186,12 +186,8 @@ public class SigninFirstRunMediator
         boolean isSigninDisabledByPolicy = false;
         boolean isMetricsReportingDisabledByPolicy = false;
         if (hasPolicies) {
-            isSigninDisabledByPolicy =
-                    IdentityServicesProvider.get()
-                            .getSigninManager(Profile.getLastUsedRegularProfile())
-                            .isSigninDisabledByPolicy();
-            isMetricsReportingDisabledByPolicy =
-                    !mPrivacyPreferencesManager.isUsageAndCrashReportingPermittedByPolicy();
+            isSigninDisabledByPolicy = true;
+            isMetricsReportingDisabledByPolicy = true;
 
             final FrePolicy frePolicy = new FrePolicy();
             frePolicy.metricsReportingDisabledByPolicy = isMetricsReportingDisabledByPolicy;
--
2.25.1
