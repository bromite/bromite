From: Your Name <you@example.com>
Date: Thu, 5 Jan 2023 11:48:07 +0000
Subject: Add a proxy configuration page (add fixup)

---
 chrome/browser/resources/proxy_config.js   | 13 ++++++++++++-
 chrome/browser/ui/webui/proxy_config_ui.cc |  2 +-
 2 files changed, 13 insertions(+), 2 deletions(-)

diff --git a/chrome/browser/resources/proxy_config.js b/chrome/browser/resources/proxy_config.js
--- a/chrome/browser/resources/proxy_config.js
+++ b/chrome/browser/resources/proxy_config.js
@@ -16,7 +16,6 @@
 */
 
 import {$} from 'chrome://resources/js/util.js';
-import {addSingletonGetter} from 'chrome://resources/js/cr.m.js';
 
 /**
  * Main entry point called once the page has loaded.
@@ -60,6 +59,18 @@ var ProxyConfigView = (function() {
   var kIdFtpProxies = 'ftp-proxies';
   var kIdFallbackProxies = 'fallback-proxies';
 
+  /**
+  * Adds a {@code getInstance} static method that always return the same
+  * instance object.
+  * @param {!Function} ctor The constructor for the class to add the static
+  *     method to.
+  */
+  function addSingletonGetter(ctor) {
+    ctor.getInstance = function() {
+      return ctor.instance_ || (ctor.instance_ = new ctor());
+    };
+  }
+
   /**
    * @constructor
    */
diff --git a/chrome/browser/ui/webui/proxy_config_ui.cc b/chrome/browser/ui/webui/proxy_config_ui.cc
--- a/chrome/browser/ui/webui/proxy_config_ui.cc
+++ b/chrome/browser/ui/webui/proxy_config_ui.cc
@@ -164,7 +164,7 @@ void ProxyConfigMessageHandler::OnProxyConfigChanged(
 
   // call Javascript function
   web_ui()->CallJavascriptFunctionUnsafe("ProxyConfigView.getInstance().onProxyConfigChanged",
-                                         *state.CreateDeepCopy());
+                                         state.Clone());
 }
 
 const std::string omitDirect(const std::string pacString) {
--
2.25.1
